#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."
echo ""

# Run ESLint on JavaScript files
echo "ğŸ“ Checking JavaScript code quality..."
npm run lint:js || {
    echo "âŒ ESLint failed. Please fix the errors above."
    exit 1
}

# Run Solhint on Solidity files
echo "ğŸ“ Checking Solidity code quality..."
npm run lint:sol || {
    echo "âŒ Solhint failed. Please fix the errors above."
    exit 1
}

# Run Prettier to check formatting
echo "ğŸ’… Checking code formatting..."
npm run format:check || {
    echo "âŒ Prettier check failed. Run 'npm run format' to fix."
    exit 1
}

# Run security audit
echo "ğŸ”’ Running security audit..."
npm audit --audit-level=moderate || {
    echo "âš ï¸  Security vulnerabilities detected. Please review."
    # Don't exit on audit failures, just warn
}

echo ""
echo "âœ… All pre-commit checks passed!"
echo ""
