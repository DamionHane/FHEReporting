#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."
echo ""

# Run tests
echo "ğŸ§ª Running test suite..."
npm test || {
    echo "âŒ Tests failed. Please fix before pushing."
    exit 1
}

# Run gas reporter
echo "â›½ Analyzing gas usage..."
REPORT_GAS=true npm test || {
    echo "âš ï¸  Gas analysis failed."
}

# Check contract size
echo "ğŸ“¦ Checking contract size..."
npm run compile || {
    echo "âŒ Compilation failed."
    exit 1
}

echo ""
echo "âœ… All pre-push checks passed!"
echo ""
